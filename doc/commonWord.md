# 常用名词  

### CaaS服务

M：CaaS是什么概念？

Z：容器即服务，一种容器云的概念，实现自动化持续集成和DOCKER镜像构建。CaaS容器云为开发者和企业提供了一个快速构建、集成、部署、运行容器化应用的平台，从而提高应用开发的迭代效率，简化运维环节，降低运维成本。

M：CaaS的相关名词有哪些？

- **代码持续集成：**完全自动化的代码管理，包括源代码存储、编译、连接、测试、发布整个创建过程都应该自动完成。
- **跨主机集群：**可以将本地云平台内部容器资源，平台外部的客户自有容器资源，及各种第三方公有云容器资源结合到一起形成混合容器云资源模式。
- **容器管控：**对容器进行CPU/内存资源配置，SSH或控制台容器接入，网络配置，环境变量设置，数据卷挂接，资源监控，日志管控，事件记录，二级域名或自有域名分配等功能。
- **数据卷或云盘：**基于云平台的数据存储工具。主要用于容器间数据共享，或某容器的外接数据卷进行数据持久化存储。    

M：那CaaS在实际使用中有什么作用？

Z：一个项目由多个工程组成，而CaaS平台可以关联来自代码仓库的工程，自动生成dockerfile。

M：CaaS平台使用java配置之后，会发生什么事情？

Z：编译配置和生成镜像

1. 编译配置：自动拉取代码进行编译
2. 生成运行镜像：生成最终镜像的dockerfile   

M：容器应用和项目镜像之间有什么关系？

Z：创建容器应用是将项目生成的镜像部署到CaaS平台上运行并提供给用户使用的过程。

M：kubernetes的Deployment，DaemonSet，statefulset三种类型的部署有什么区别呢？

Z：以下是程序的解释，暂时还是不太明白：

- Deployment是升级版的Replication Controller，它以replica set的形式维护pod的个数，部署的升级/回滚/扩容/缩容由k8s负责维护处理。
- DaemonSet保证所选的每个节点上且只有一个pod运行，部署的升级/回滚/扩容/缩容由k8s维护处理，这些操作不能中断，只能停止当前部署。
- StatefulSet是一些系列有状态的pod的集合，pod均拥有稳定的持久化网络存储、网络标志。创建此类部署时，pod副本数量和存储选项一经设置便不能修改。

### pod   

M：什么是pod呢？

Z：集群调度的最小单元就是一个pod，一个pod可以是一个容器，也可以是多个容器，例如你运行一个程序，其中使用了nginx，使用mysql了，使用了jetty，那么可以将这三个使用在同一个pod中，对他们提供统一的调配能力，一个pod只能运行在一个主机上，而一个主机上可以有多个pod。   

M：简单来说就是一堆互相配合的程序集合。    

### etcd服务   

M：etcd是一个高可用的分布式键值(key-value)数据库。处理同一个分布式集群中的进程或服务如何才能找到对方并建立连接的问题。   

### Haproxy代理  

Z：相当于nginx代理工具。

虽然apache、nginx之类也有反向代理(转发)功能，通常只能用于http协议，其它协议就不好使了。  

haproxy可以弥补这方面的不足，haproxy支持http/tcp多种协议，可以当做rpc框架前端的负载均衡转发中间件。   

### flannel  

M：Overlay模式下采用flannel管理容器网络；Host模式下容器网络配置与宿主机一致，不能使用健康检查。那么flannel是什么?

Z：flannel是CoreOS提供用于解决Dokcer集群跨主机通讯的覆盖网络工具。它的主要思路是：预先留出一个网段，每个主机使用其中一部分，然后每个容器被分配不同的ip；让所有的容器认为大家在同一个直连的网络，底层通过`UDP/VxLAN`等进行报文的封装和转发。

M：简单来说一个网络规划工具。两个主机下的Docker容器之间是不互通的，通过部署flannel，对docker容器的ip进行规划，就能实现跨主机容器之间的通信。  

### CI&CD工作流  

M：CI&CD工作流有什么作用？  

Z：简单来说就是将项目构建镜像和应用部署的整个流程作为一个工作流，当代码提交到代码仓库后会自动构建项目镜像，镜像版本升级后自动部署到测试或生产环境上。   

#### 粘性与非粘性

- 黏性Session和非黏性Session 黏性Session：此模式下同一会话中的请求都被派送到同一个tomcat实例上，这样我们就无须在多台服务器之间实现session共享了，这是其好处，不好的地方就是不能实现failureover了，一但用户访问的机器挂掉，那么其session就会丢失。 

- 非黏性Session：又名复制Session，此模式下同一会话中的请求可以被分配到不同的tomcat实例上进行处理，此时就需要在不同服务器之间同步、复制session，这样一来即使一台服务器挂掉了，请求在其它服务器上照样可以访问到session信息，其缺点在于Session复制需要系统资源和网络开销

---

#### 项目构建   

1. 使用git上传war包，然后直接进行构建。

#### 应用管理-服务   

1. Deployment（默认）:无状态使用
2. Statefulset（有状态）：需要加存储
3. namespace：每个项目创建一个namespace，用来区分DNS域名

4. 主机标签：不指定主机将自动去判断，指定则发布该主机     
5. 网络模式：一般默认Overlay，类似虚拟机。host则类似物理机。
6. 访问模式：默认对内服务。
7. 粘性会话：开启粘性会话不会到处跳动。
8. 镜像拉取策略： 
   - Always：镜像修改版本镜像自动化更新
   - Never：不做修改
   - If Not Present：不存在就拉取
9. 挂载存储：从配置的存储中指定挂载
10. 配置管理：添加配置文件到指定目录，像添加nginx.conf到conf目录下
11. 启动命令：覆盖原先项目内的启动命令（不包含启动参数）
12. 启动参数：启动参数以键值对的方式填入
13. 运行过程环境变量：配置键值对等相关信息
14. 容器大小：一般默认都为0，服务间将进行竞争

用户管理，Devops，创建用户进行登录  
